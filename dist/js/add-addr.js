function add(e){$.ajax({type:"get",url:"api/doAddr.php",data:{style:e.style,user:e.user,consignee:e.consignee,num:e.num,addr1:e.addr1,addr2:e.addr2,postCode:e.postCode},dataType:"json",success:function(e){0==e.code&&(window.location.href="addr-list.html")}})}$(function(){$(".ceng i").click(function(){$(".ceng").hide()}),$(".location input").click(function(){var e,t,s,c;$(".ceng").show(),$(".ceng .address").children().eq(0).addClass("active").siblings().removeClass("active"),$(".select").children().html(""),$(".ceng .address").children(".active").nextAll().html(""),$(".province").show();var i="";$.each(place,function(e,t){i+="<p>"+e+"</p>"}),$(".province").html(i),$(".province").on("click","p",function(){$(this).parent().next().show().siblings().hide();var i="";e=$(this).html(),$(".ceng .address").children().eq(0).html(e).removeClass("active").next().addClass("active").html("请选择"),$(".ceng .address").children(".active").nextAll().html(""),$.each(place[e][0],function(e,t){i+="<p>"+e+"</p>"}),$(".city").html(i),$(".city").on("click","p",function(){$(this).parent().next().show().siblings().hide();var i="";t=$(this).html(),$(".ceng .address").children().eq(1).html(t).removeClass("active").next().addClass("active").html("请选择"),$(".ceng .address").children(".active").nextAll().html(""),$.each(place[e][0][t],function(e,t){$.each(t,function(e,t){i+="<p>"+e+"</p>"})}),$(".area").html(i),$(".area").on("click","p",function(){$(this).parent().next().show().siblings().hide();var n="<p>暂不选择</p>";s=$(this).html(),$(".ceng .address").children().eq(2).html(s).removeClass("active").next().addClass("active").html("请选择"),$(".ceng .address").children(".active").nextAll().html(""),$.each(place[e][0][t][$(this).index()],function(e,t){var i=t.split("、");$.each(i,function(e,t){n+="<p>"+t+"</p>"})}),$(".town").html(n),$(".town").on("click","p",function(){c=$(this).html(),$(".ceng .address").children().eq(3).html(c),$(".ceng").hide(),"暂不选择"==c?$(".location input").val(e+" "+t+" "+s):$(".location input").val(e+" "+t+" "+s+" "+c),console.log(e,t,s,c)})})})})})}),$(function(){$(".ceng span").click(function(){$(this).addClass("active").siblings().removeClass("active"),$(".select div").eq($(this).index()).show().siblings().hide()})}),$(function(){function e(e){var t={user:user,consignee:$("#userName").val(),num:$("#phoneNumber").val(),addr1:$("#addrDetailName").val(),addr2:$("#userAddress").val(),postCode:$("#postCode").val(),style:e};return 0==t.user.length?($(".tip-box").html("收货人不能为空,请重新填写!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):0==t.num.length?($(".tip-box").html("请填写手机号码!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):/^1[3-9]\d{9}$/.test(t.num)?0==t.addr1.length||0==t.addr2.length?($(".tip-box").html("请填写详细地址!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):t.addr2.length<=5?($(".tip-box").html("详细地址字数必须5位以上!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):0==t.postCode.length?($(".tip-box").html("请填写邮政编码!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):/^[1-9]\d{5}$/.test(t.postCode)?void add(t):($(".tip-box").html("邮政编码格式错误!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1):($(".tip-box").html("手机号码格式错误!").show(),setTimeout(function(){$(".tip-box").hide()},1500),!1)}$(".save-addr").click(function(){e(1)}),$(".change-addr").click(function(){e(0)})});